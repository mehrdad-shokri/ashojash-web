{"version":3,"sources":["echo.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"async-loader.js","sourcesContent":["/*! echo.js v1.7.0 | (c) 2015 @toddmotto | https://github.com/toddmotto/echo */\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define(function() {\r\n            return factory(root);\r\n        });\r\n    } else if (typeof exports === 'object') {\r\n        module.exports = factory;\r\n    } else {\r\n        root.echo = factory(root);\r\n    }\r\n})(this, function (root) {\r\n\r\n    'use strict';\r\n\r\n    var echo = {};\r\n\r\n    var callback = function () {};\r\n\r\n    var offset, poll, delay, useDebounce, unload;\r\n\r\n    var isHidden = function (element) {\r\n        return (element.offsetParent === null);\r\n    };\r\n\r\n    var inView = function (element, view) {\r\n        if (isHidden(element)) {\r\n            return false;\r\n        }\r\n\r\n        var box = element.getBoundingClientRect();\r\n        return (box.right >= view.l && box.bottom >= view.t && box.left <= view.r && box.top <= view.b);\r\n    };\r\n\r\n    var debounceOrThrottle = function () {\r\n        if(!useDebounce && !!poll) {\r\n            return;\r\n        }\r\n        clearTimeout(poll);\r\n        poll = setTimeout(function(){\r\n            echo.render();\r\n            poll = null;\r\n        }, delay);\r\n    };\r\n\r\n    echo.init = function (opts) {\r\n        opts = opts || {};\r\n        var offsetAll = opts.offset || 0;\r\n        var offsetVertical = opts.offsetVertical || offsetAll;\r\n        var offsetHorizontal = opts.offsetHorizontal || offsetAll;\r\n        var optionToInt = function (opt, fallback) {\r\n            return parseInt(opt || fallback, 10);\r\n        };\r\n        offset = {\r\n            t: optionToInt(opts.offsetTop, offsetVertical),\r\n            b: optionToInt(opts.offsetBottom, offsetVertical),\r\n            l: optionToInt(opts.offsetLeft, offsetHorizontal),\r\n            r: optionToInt(opts.offsetRight, offsetHorizontal)\r\n        };\r\n        delay = optionToInt(opts.throttle, 250);\r\n        useDebounce = opts.debounce !== false;\r\n        unload = !!opts.unload;\r\n        callback = opts.callback || callback;\r\n        echo.render();\r\n        if (document.addEventListener) {\r\n            root.addEventListener('scroll', debounceOrThrottle, false);\r\n            root.addEventListener('load', debounceOrThrottle, false);\r\n        } else {\r\n            root.attachEvent('onscroll', debounceOrThrottle);\r\n            root.attachEvent('onload', debounceOrThrottle);\r\n        }\r\n    };\r\n\r\n    echo.render = function () {\r\n        var nodes = document.querySelectorAll('img[data-echo], [data-echo-background]');\r\n        var length = nodes.length;\r\n        var src, elem;\r\n        var view = {\r\n            l: 0 - offset.l,\r\n            t: 0 - offset.t,\r\n            b: (root.innerHeight || document.documentElement.clientHeight) + offset.b,\r\n            r: (root.innerWidth || document.documentElement.clientWidth) + offset.r\r\n        };\r\n        for (var i = 0; i < length; i++) {\r\n            elem = nodes[i];\r\n            if (inView(elem, view)) {\r\n\r\n                if (unload) {\r\n                    elem.setAttribute('data-echo-placeholder', elem.src);\r\n                }\r\n\r\n                if (elem.getAttribute('data-echo-background') !== null) {\r\n                    elem.style.backgroundImage = \"url(\" + elem.getAttribute('data-echo-background') + \")\";\r\n                }\r\n                else {\r\n                    elem.src = elem.getAttribute('data-echo');\r\n                }\r\n\r\n                if (!unload) {\r\n                    elem.removeAttribute('data-echo');\r\n                    elem.removeAttribute('data-echo-background');\r\n                }\r\n\r\n                callback(elem, 'load');\r\n            }\r\n            else if (unload && !!(src = elem.getAttribute('data-echo-placeholder'))) {\r\n\r\n                if (elem.getAttribute('data-echo-background') !== null) {\r\n                    elem.style.backgroundImage = \"url(\" + src + \")\";\r\n                }\r\n                else {\r\n                    elem.src = src;\r\n                }\r\n\r\n                elem.removeAttribute('data-echo-placeholder');\r\n                callback(elem, 'unload');\r\n            }\r\n        }\r\n        if (!length) {\r\n            echo.detach();\r\n        }\r\n    };\r\n\r\n    echo.detach = function () {\r\n        if (document.removeEventListener) {\r\n            root.removeEventListener('scroll', debounceOrThrottle);\r\n        } else {\r\n            root.detachEvent('onscroll', debounceOrThrottle);\r\n        }\r\n        clearTimeout(poll);\r\n    };\r\n\r\n    return echo;\r\n\r\n});"],"sourceRoot":"/source/"}